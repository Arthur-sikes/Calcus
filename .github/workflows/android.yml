      - name: Build APK with Buildozer
        run: |
          # 1. Clean any previous failed attempts
          buildozer android clean
          
          # 2. Pre-download the SDK manager and force-accept licenses
          # This specifically targets the SDK manager tool to accept licenses
          mkdir -p ~/.buildozer/android/platform/android-sdk/cmdline-tools/latest
          
          # 3. Use the automated build command with verbose logging
          # We use --requirements to ensure it doesn't hang on a hidden prompt
          buildozer -v android debug
        env:
          USER: root
          # This env var helps skip some interactive prompts in newer pip/python envs
          PIP_BREAK_SYSTEM_PACKAGES: 1
